<mat-spinner *ngIf="isLoading"></mat-spinner>

  <mat-grid-list class='header-tiles' cols="4" rowHeight="2:1">

    <mat-form-field  appearance="fill" floatLabel="always">
      <mat-label>Monthly Payment</mat-label>
      <input
      [(ngModel)]="monthlyPayment" 
      matInput 
      type="number" 
      class="example-right-align" 
      placeholder="0">
      <span matPrefix>$&nbsp;</span>
      <span matSuffix>.00</span>
    </mat-form-field>
    <span class="spacer"></span>

    <mat-form-field  appearance="fill" floatLabel="always">
      <mat-label>Net Monthly Income</mat-label>
      <input 
      [(ngModel)]="netMonthlyIncome" 
      matInput 
      type="number" 
      class="example-right-align" 
      placeholder="0">
      <span matPrefix>$&nbsp;</span>
      <span matSuffix>.00</span>
    </mat-form-field>
    <span class="spacer"></span>

    <mat-form-field  appearance="fill" floatLabel="always">      <mat-label>Amount</mat-label>
      <input 
      matInput 
      [(ngModel)]="amount" 
      type="number" 
      class="example-right-align" 
      placeholder="0">
      <span matPrefix>%</span>
      <span matSuffix></span>
    </mat-form-field>


    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Utilization</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.utilization  | percent}}</h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Total Balance</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.totalBalance  | currency:'CAD' }}</h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Total Limit</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.totalLimit  | currency:'CAD' }}</h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Interest</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.estimatedInterest  | currency:'CAD' }}</h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Annual Interest</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.estimatedInterestAnnual  | currency:'CAD' }}</h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Number of Payments</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2>{{this.totalBalance / this.monthlyPayment  |  number }} </h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Other</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2></h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile>
      <mat-card class="wide-card">
        <mat-card-header>
          <mat-card-title>Other</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content-align">
          <h2></h2>
        </mat-card-content>
      </mat-card>
    </mat-grid-tile>
  </mat-grid-list>
<mat-accordion multi="true" *ngIf="cards.length > 0 && !isLoading">
  <mat-expansion-panel *ngFor="let card of cards">
    <mat-expansion-panel-header>
      {{ card.title }}
    </mat-expansion-panel-header>
    <mat-grid-list cols="4" rowHeight="4:3">
      <mat-grid-tile colspan='2' rowspan='2'>
          <div class="card-image">
            <img [src]="card.imagePath" [alt]="card.title">
          </div>
      </mat-grid-tile>

      <mat-grid-tile colspan='1' rowspan='1'>
        <div>
          <p>{{ card.institution}}</p>
          <p>Due on {{ card.dueDate | date : 'fullDate'}}</p>
          <p>{{ card.interest | percent }} interest</p>
          
        </div>
      </mat-grid-tile>
      
      <mat-grid-tile colspan='1' rowspan='1'>
        <div>
          <p>{{ card.balance | currency:'CAD' }} balance</p>
          <p>{{ card.limit | currency:'CAD' }} limit</p>
          <p>{{ card.balance / card.limit | percent }} utilization</p>
        </div>
      </mat-grid-tile>

      <mat-grid-tile colspan='2' rowspan='1'>
        <div>
          <p>{{ card.description }}</p>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
    <mat-action-row>
      <a mat-button color="primary" [routerLink]="['/card/edit', card.id]">EDIT</a>
      <button mat-button color="warn" (click)="onDelete(card.id)">DELETE</button>
    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>
<p class="info-text mat-body-1" *ngIf="cards.length <= 0 && !isLoading">No cards added yet!</p>
